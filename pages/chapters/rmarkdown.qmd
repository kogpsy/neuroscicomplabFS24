---
title: "RStudio Projects und RMarkdown"
description: Data Reports mit Text und Code.
author:
  - name: Gerda Wyssen
    affiliation: Kognitive Psychologie, Wahrnehmung und Methodenlehre, Universit√§t Bern 
    affiliation-url: https://www.kog.psy.unibe.ch
    orcid: 0000-0001-7427-3149
license: CC BY
citation: true
bibliography: ../../bibliography_nsci24.bib
format:
    html:
        toc: true
        code-link: true
---

# RStudio Projects

RStudio Projekte erm√∂glichen vereinfachtes Arbeiten mit R, da alle Dateien, die in diesem Projektordner gespeichert sind, direkt verf√ºgbar sind. So kann die aktuelle R Session abgespeichert werden und beim n√§chsten √ñffnen kann dort weitergearbeitet werden wo man aufgeh√∂rt hat. Projekte erm√∂glichen somit ein kontinuierliches `working directory`.

:::callout-caution
## Hands-on: Erstellen eines RStudio Projects

1. √ñffnen Sie RStudio.

2. Erstellen Sie ein neues RStudio-Project 

    - Klicken Sie daf√ºr auf `File` > `New Project` 
    
    - Benennen Sie das Project `neurosci_complab_rmarkdown` und speichern Sie es an einem sinnvollen Ort auf Ihrem Computer.
:::

Es empfiehlt sich bei RProjekten eine Einstellungs√§nderung (`Tools`> `Project Options...`) vorzunehmen, so dass die aktuell gespeicherten Variablen bei jedem Schliessen vom Projekt gel√∂scht werden. Dies verhindert, dass der aktuelle Code nur aufgrund fr√ºherer Speicherung l√§uft.

![](img/rprojects_saveworkspace.jpg)

:::callout-tip
## Tipp: Namensgebung beim Speichern von Files

Wenn Sie Filenamen vergeben, achten Sie darauf dass diese _machine-readable_ sind:

- keine L√ºcken (nehmen Sie stattdessen `-` oder `_`)

- keine `√§`, `√∂`, `√º` oder andere Sonderzeichen
:::

# R Markdown 

R Markdown ist eine simple Markup-Sprache, die es erm√∂glicht reproduzierbare Data Reports zu erstellen. R Markdown ist praktisch, weil Text und Code gleichzeitig verwendet werden kann und der Output des Codes angezeigt wird. Text kann verwendet werden, ohne dass vor jeder Zeile ein `#` zum Auskommentieren gesetzt werden. Zudem kann Text formatiert werden, also z.B. __dick__ oder _kursiv_ dargestellt werden oder Auflistungen beinhalten. 

Das Skript der R Markdown Files wird *geknittet* und so - je nach Wahl - zu einem HTML, PDF oder Word-Dokument zusammengef√ºgt. R Markdown kann also beispielsweise eine Text-Beschreibung, Code zum Erstellen einer Grafik und auch die erstellte Grafik in einem Dokument kombinieren. 

<aside>Mit R Markdown k√∂nnen auch Pr√§sentationen, Webseiten, B√ºcher, Lebensl√§ufe, Artikel oder Arbeiten erstellt werden. [Hier](https://rmarkdown.rstudio.com/gallery.html) finden Sie eine Galerie. Die Kurswebsite wurde ebenfalls in R erstellt. </aside>

## R Markdown File erstellen und ausf√ºhren 

:::{.callout-caution}
## Hands-on: R Markdown File in einem Projekt erstellen

1. Erstellen Sie ein neues `.Rmd`-File (`File` > `New File` > `R Markdown`).

2. Geben Sie einen Titel und Ihren Namen ein und w√§hlen Sie `HTML` als Output-Format.

3. Speichern Sie dieses Dokument unter dem Namen `rmarkdown_example`ab. 

Welches Format (Endung) hat das abgespeicherte R Markdown Skript nun in Ihrem Ordner?
:::

<aside>**Weiterf√ºhrende Informationen:** 

üëâ Einf√ºhrung in die Verwendung von R/RStudio/Notebooks im Rahmen des Psychologie Studiums von Andrew Ellis und Boris Mayer [Einf√ºhrung in R](https://methodenlehre.github.io/einfuehrung-in-R/chapters/01-workflow.html#r-notebooks-verwenden)

üëâ Sehr kompakte, praxisnahe Einf√ºhrung in R Markdown von Danielle Navarro (Slidedeck in englisch) [Einf√ºhrung in R Markdown](https://djnavarro.net/slides-starting-rmarkdown)
</aside>

## Knitten

Mit **Knit** wird das R Markdown Skript ausgef√ºhrt und eine zus√§tzliche Datei wird erstellt, z.B. ein `html`-File.

:::{.callout-important}
## Hands-on: Knitten

F√ºhren Sie das File mit `Knit` aus und vergleichen Sie das R Markdown Skript mit dem Output den Sie erhalten haben. Was f√§llt Ihnen auf?

- Was ist nicht mehr zu sehen?
- Was ist zus√§tzlich zu sehen?
- Was hat sich im Projekt-Ordner ver√§ndert?
:::

<!-- :::{.callout-tip collapse="true"} -->
<!-- ## L√∂sung 2 -->
<!-- Nicht mehr zu sehen ist der vollst√§ndige YAML-header, ganz oben im R Markdown Skript.  -->

<!-- Auch nicht mehr zu sehen ist die "Umrandung" des Code-Snippets. -->

<!-- Neu sieht man nun den Output des Codes. -->

<!-- Im Projektordner wurde ein `.html`-File erstellt. Sie k√∂nnen dieses √∂ffnen, um zu schauen wie das aussieht. -->

<!-- ::: -->

## YAML header
Am Anfang des R Markdown Skripts befindet sich der `YAML header`. Hier werden Informationen zu Titel, Autor:Innen, Datum, Outputformat, Literaturverzeichnis und Layout festgelegt.

<aside>YAML: Yet Another Markdown Language</aside> 

Das Layout kann unter `theme`ge√§ndert werden. Das kann beispielsweise wie folgt aussehen:

```
output:
  html_document:
    theme: cosmo
```
Achtung: Die Einr√ºckungen m√ºssen genau stimmen! Hier wurde das `theme` namens `cosmo` ausgew√§hlt. M√∂gliche andere `themes`sind z.B. `default`, `cerulean`, `journal`, `flatly`, `darkly`, `readable`, `spacelab`, `united`, `cosmo`, `lumen`, `paper`, `sandstone`, `simplex`, `yeti`. 

:::{.callout-caution}
## Hands-on: Namen und Einstellungen anpassen
- Geben Sie dem Dokument einen neuen Titel z.B. `R Markdown Einf√ºhrung`

- √Ñndern Sie das Layout so, dass es Ihnen gef√§llt. 
    
:::

## Text erstellen in R Markdown

Text kann in R Markdown Files nicht nur geschrieben, sondern auch relativ simpel formatiert werden.

üëâ [Hier](https://github.com/rstudio/cheatsheets/raw/main/rmarkdown-2.0.pdf) k√∂nnen Sie das Cheatsheet herunterladen. Auf der rechten Seite finden Sie die Informationen f√ºr die Textformatierung.

Es empfiehlt sich das Skript anfangs h√§ufig zu knitten, so findet man den Fehler schneller, weil man noch weiss, was man als letztes ver√§ndert hat. Code kann aber auch einfach innerhalb der _Code-Chunks_ √ºberpr√ºft werden.

:::{.callout-caution}
## Hands-on: Texte, Formeln und Bilder in R Markdown einf√ºgen

- L√∂schen Sie alles bis auf den YAML-Header

- Schreiben Sie im Textbereich eine √úberschrift f√ºr ein Kapitel, ein Unterkapitel und normalen Text.

- Schreiben Sie im Text etwas kursiv und etwas fett.

- Erstellen Sie im Textbereich eine Liste mit 3 Punkten.

- Schreiben Sie `alpha` innerhalb von `$`, was passiert?

- F√ºgen Sie die untenstehende Formel in den Text ein. Verwenden Sie daf√ºr zwei Dollarzeichen am Anfang und am Ende. Was passiert? 

$$
a^2 + b^2 = c^2
$$

- F√ºgen Sie einen Link ein, knitten Sie das File und schauen Sie ob der Link funktioniert. K√∂nnen Sie einen Link nur mit einem unterstrichenen Text anzeigen, so dass die Linkadresse nicht sichtbar ist?

- F√ºgen Sie ein Bild ein. Sie k√∂nnen beispielsweise das Bild `logo_landing.png` aus dem Projektordner nutzen oder ein eigenes verwenden.

:::

<aside>Hier finden Sie weiterf√ºhrende Hilfe zum Einf√ºgen von Mathnotationen.

- [Mathematics in RMarkdown](https://rpruim.github.io/s341/S19/from-class/MathinRmd.html)

- [RMarkdown: The definitive Guide](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html#math-expressions)
</aside>


## Code erstellen in R Markdown

Code muss jeweils in einem _Code-Chunk_ eingef√ºgt werden. Ein _Code-Chunk_ kann unter `Code` > `Insert Chunk` eingef√ºgt werden oder mit dem K√ºrzel `Ctrl`+`Alt`+ `I`. _Code-Chunks_ werden mit ` ``` ` begonnen und beendet. In den geschweiften Klammern steht `r`, das bedeutet dass der Code in `R` geschrieben ist. In dieser Klammer kann dem _Code-Chunk_ einen Namen gegeben und bestimmt werden, ob der Code ausgef√ºhrt und z.B. nur angezeigt werden soll, sowie ob der Output des Codes angezeigt werden soll. 

Mit dem gr√ºnen Pfeil kann der _Code-Chunk_ einzeln ausgef√ºhrt werden. Aber auch einzelne Zeilen k√∂nnen ausgef√ºhrt werden, genau so wie in einem `.R`- Skript.

:::{.callout-caution}
## Hands-on: Code in R Markdown einf√ºgen

- Erstellen Sie einen Code-Chunk, der ausgef√ºhrt, aber nicht angezeigt wird. Erstellen Sie eine Variable mit dem Namen `numbers`, die 10 Zahlen enth√§lt. 

- Erstellen Sie ein Code-Chunk, der ausgef√ºhrt wird und dessen Output angezeigt wird. Berechnen Sie in diesem Chunk den Mittelwert und die Standardabweichung von `numbers`.

- Erstellen Sie einen Plot mit `plot(numbers)`.

- Knitten Sie das File, um zu √ºberpr√ºfen, ob alles funktioniert 

üëâ Schauen Sie f√ºr Hilfe nochmals im Cheatsheet nach oder dr√ºcken Sie auf das Zahnr√§dchen-Symbol beim Code-Chunk.
:::

